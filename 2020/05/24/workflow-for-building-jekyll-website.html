<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>How to build Jekyll website on WINDOWS</title>
    <meta name="author" content="fubar">
    <meta name="description" content="A collection of HOWTOs in programming and commonly used tools by graduate students with focus on physicists. Additionally, an attempt is made to understand the intricate connection between Adwaitha / అద్వైతా / अद्वैता philosophy, physics and Mother Nature.">
    <link rel="icon" href="/assets/images/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <script src="/js/snap.svg-min.js" defer></script>
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" />
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>How to build Jekyll website on WINDOWS</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="How to build Jekyll website on WINDOWS" />
<meta name="author" content="fubar" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Let us use web development tools hosted on the Windows Subsystem for Linux to build static websites eventually to be hosted on GitHub." />
<meta property="og:description" content="Let us use web development tools hosted on the Windows Subsystem for Linux to build static websites eventually to be hosted on GitHub." />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-05-24T00:00:00+05:30" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"/2020/05/24/workflow-for-building-jekyll-website.html","headline":"How to build Jekyll website on WINDOWS","dateModified":"2020-05-24T00:00:00+05:30","datePublished":"2020-05-24T00:00:00+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"/2020/05/24/workflow-for-building-jekyll-website.html"},"author":{"@type":"Person","name":"fubar"},"description":"Let us use web development tools hosted on the Windows Subsystem for Linux to build static websites eventually to be hosted on GitHub.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>
  <body>
    <img class="fit-picture"
     src="/assets/images/swamiVivekananda.svg"
     alt="Swami Vivekananda">

<nav class=navigation>
  
  <!-- uncomment below line to render the names of the navigation items -->
<!--
    <a href="/" >Home</a>
-->
    <a
        href="/" >
            <img src="/assets/images/homePageHomeLogo.svg" alt="homepage logo">
    </a>
  
  <!-- uncomment below line to render the names of the navigation items -->
<!--
    <a href="/about.html" >About</a>
-->
    <a
        href="/about.html" >
            <img src="/assets/images/homePageAboutLogo.svg" alt="about logo">
    </a>
  
  <!-- uncomment below line to render the names of the navigation items -->
<!--
    <a href="/blog.html" >Blog</a>
-->
    <a
        href="/blog.html" >
            <img src="/assets/images/homePagePostsLogo.svg" alt="blog logo">
    </a>
  
  <!-- uncomment below line to render the names of the navigation items -->
<!--
    <a href="/staff.html" >Staff</a>
-->
    <a
        href="/staff.html" >
            <img src="/assets/images/homePageStaffLogo.svg" alt="staff logo">
    </a>
  

</nav>

<nav class=navigation-tags>
    <p>Post Tags</p>
    
        <a href="/physics.html"
           
        >
           physics
        </a>
    
        <a href="/programming.html"
           
        >
           programming
        </a>
    
        <a href="/nature.html"
           
        >
           nature
        </a>
    
 </nav>

    <h1 class="Headnote">How to build Jekyll website on WINDOWS</h1>
<p >
  24 May 2020 - fubar
  
  
    - <a href="/authors/fubar.html">Sreekar Guddeti</a>
  
</p>

<div class="box">
<img src="/assets/images/Jekyll/JekyllLogo.svg" alt="jekyll-logo" width="150px" />
</div>

<h2 id="unexpected-motivation-windows-subsystem-for-linux">Unexpected motivation: Windows Subsystem for Linux</h2>

<p>My motivation to try out Jekyll is twofold. The first revolves around a possibility to revive my lost touch with GNU/Linux OS. The other is the promise of Jekyll to have programmatic control over building websites. These are interlinked. But I would like to present a perspective.</p>

<p>I like to work on GNU/Linux distribution. In my undergraduate studies, I mostly explored the Ubuntu operating system, which is Debian based operating system. Debian itself is a GNU/Linux distribution. However in my PhD, I bought a Dell Inspiron 7348 13 inch laptop which had Windows preinstalled. I wished for a Ubuntu version, but unfortunately it was not available in the market in my home country, India. I was not confident of flashing the hard disk and install my custom version of Ubuntu as I was new to laptops and read in the Internet that GNU/Linux OSes are not stable in laptops because the certain hardware components like networking related in a laptop still dont have open source drivers that are supported by the OEMs (Original Equipment Manufacturers). This was the story back in the year 2015. Anyways, the long story short is that I stuck to Windows OS even though I was not happy till I came know of Windows Subsystem for Linux. Using Linux in Windows as virtual machine using <a href="https://www.virtualbox.org/">VirtualBox</a> was promising but was resource heavy in terms of memory and overall feeling was of slow performance. As a result</p>

<p>Windows Subsystem for Linux (WSL) promised to bridge the communities of the Windows and GNU/Linux world and provide commonly used GNU/Linux tools on the Windows platform. This was an output of very smart people and hinted at the importance of open source community in driving innovation. Also surprisingly, this sent an alarm across the open source community about the <a href="https://itsfoss.com/windows-linux-kernel-wsl-2/">impending death of open source development</a>.. Till now most of the software development was mutually disjoint into the proprietary world and the open source world.</p>

<h2 id="expected-motivation-jekyll">Expected Motivation: Jekyll</h2>

<p>Earlier I used to build my website using <a href="https://www.glump.net/software/zim-windows">Zim desktop wiki</a>. Zim is a great tool. It actually helped me learned some aspects of Application Programmers Interfaces (APIs) after going through its source code. But it was not difficult to realize the limitations of such workflows as using Zim or Wordpress after reading an article by Andrej Karpathy to <a href="https://karpathy.github.io/2014/07/01/switching-to-jekyll/">switch from Wordpress to Jekyll</a>. Wordpress site is built on a database, which itself is binary and prone to security threats. In retrospection/hindsight, Zim does not have programmatic control over the variables of the site like the authors, posts, tags and titles.</p>

<p>My testimonial to Zim written at the forum in September of 2019.</p>

<blockquote>
  <p>My motivation to migrate from Zim to <a href="https://github.com/jekyll/jekyll">Jekyll</a> actually involved a cascade of events primarily starting from a desire to version control my PhD thesis. As a result I fleeted along various tools like <a href="https://github.com/">GitHub</a> (for versioning content), <a href="https://daringfireball.net/projects/markdown/syntax#philosophy">markdown</a> (for structuring content), <a href="https://atom.io/">Atom</a> (for editing content) and Jekyll (for viewing content). The GCD (upside) of these tools turned out to be <strong>seamless platform (desktop/web) agnostic content-keeping</strong>. The LCM (downside) is the larger footprint compared to the much leaner Zim. Since Zim restrains itself by being a <strong>desktop wiki</strong>, I was more convinced to make the migration after reading a <a href="https://github.com/zim-desktop-wiki/zim-desktop-wiki/issues/26">GitHub issue that discusses Zim lacks markdown support</a>. After reading a <a href="https://v4.chriskrycho.com/2015/academic-markdown-and-citations.html">post on an academic writing workflow</a> by Chris Krycho using markdown with the support of <a href="https://pandoc.org/">Pandoc</a> (for interdocument conversion), I started the migration. Jekyll is only a part of the process.
   Notwithstanding my perceived limitations of Zim, as a testimony, I would like to share that Zim helped me learn a lot about web tools (like wiki functioning, html, thrill of creating your own site with fivethirtyeight theme :D (I still use it for my site)), content-keeping (like interlinking notebooks), API usage (my first serious foray into reading source codes was through Zim. I managed to extend Zim’s functionality, along with some web scraping Python modules, to setup up a Mendeley like interface of many-to-many mappings between Authors, Titles and Years :D).
  On a philosophical note, <strong>Zim is but a bead in the process of evolution of content-keeping</strong>. It is neither the beginning nor the end. Its a long way to go where the GCD equals the LCM (the ultimate non duality) ;).</p>
</blockquote>

<p>Let us get started with building Jekyll generated static sites on Windows.</p>

<hr />

<h2 id="requirements-of-jekyll">Requirements of Jekyll</h2>

<ul>
  <li>Ruby</li>
  <li>Git(optional)</li>
</ul>

<p><a href="https://jekyllrb.com/">Jekyll</a> is a static site generator. It is assumed that the site we intend to create is a collection of posts. We can order the posts based on the creation date, the authors of the posts, the tags that represent the post content. The design philosophy for the site can also be materialied using other site generators like Wordpress or offline static generators like <a href="https://www.glump.net/software/zim-windows">Zim desktop wiki</a>.</p>

<p>In this post, we focus on the build process of the website rather than the philosophy of Jekyll. For more information on how Jekyll works, refer to the post <a href="/2019/10/13/Building-Jekyll-website.html">What is Jekyll?</a></p>

<h3 id="ruby">Ruby</h3>

<p>Jekyll is a Ruby gem based on Ruby programming language. However there is no need to know Ruby to build our site. What we need however is Ruby installed on Windows OS. Now there are <a href="https://jekyllrb.com/docs/installation/windows/">two options</a> for a Ruby installation.</p>

<ul>
  <li>A native installation of Ruby for Windows</li>
  <li>A Linux based installation in the Windows subsystem for Linux (WSL).</li>
</ul>

<p>I personally was thrilled with the second option. This led me for the first time to explore <a href="https://docs.microsoft.com/en-us/windows/wsl/about">Windows Subsystem for Linux</a>.</p>

<blockquote>
  <p>Windows Subsystem for Linux is a GNU/Linux environment <strong>directly</strong> in Windows <strong>without the overhead of running a virtual machine</strong>. This is something that baffled most of the development communities of both open source and closed source.</p>
</blockquote>

<p>WSL needs Windows to run on Insider Preview mode. This allows to activate WSL as an optional feature. After activating the WSL, <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">install a GNU/Linux distribution on Windows</a>. I chose Ubuntu 18.04 LTS. After a successful installation of Ubuntu 18.04, you can start literally open <strong>Bash terminal on Windows</strong>.</p>

<p>Now <a href="https://jekyllrb.com/docs/installation/windows/">install the Jekyll Ruby gem</a> on WSL as shown below.</p>

<p><img src="/assets/images/Jekyll/JekyllBuildWebsite_00.png" alt="install-Jekyll" /></p>

<h3 id="gitoptional">Git(optional)</h3>

<p>Though the version control is not necessary, it has its own benefits. Creation of contents is not a one time affair, and we need to incrementally revise our content and maybe revert back to previous versions of content. In such circumstances versioning your content saves your skin.</p>

<p><a href="https://git-scm.com/download/win">Git for windows</a> installation is straightforware. However knowing how to use Git is <strong>not</strong>. It has steep enough learning curve, but once a working knowledge is acquired, there is no going back.</p>

<hr />

<h2 id="setup-a-jekyll-website">Setup a Jekyll website</h2>

<p>Jekyll supports gem based themes for the website, which outline the structure of the website and its styling. The structure conveys how the posts are stored, how the authors of the posts hyperlinked to the posts, if there are any tags  to the posts that can be sieved. However, we will follow the basic route and not rely on these theme. Instead let us <a href="https://jekyllrb.com/docs/step-by-step/01-setup/">setup a website from scratch</a>. The folder structure of our website will look something like this.</p>

<p><img src="/assets/images/Jekyll/JekyllBuildWebsite_01.png" alt="website-structure" /></p>

<p>The core components of the website are</p>

<ul>
  <li><code class="highlighter-rouge">&lt;root&gt;</code> directory which holds the source code of the site. It can have any name.</li>
  <li><code class="highlighter-rouge">.config.yml</code> A YAML file that describes how the site is configured.</li>
  <li><code class="highlighter-rouge">Gemfile</code> that lists the Ruby dependencies of the sites.</li>
  <li><code class="highlighter-rouge">Gemfile.lock</code> A file that freezes the version changes of dependencies so that site can be constructed across platforms and system. This is similar to a <code class="highlighter-rouge">requirements.txt</code> file used during installing a python virtual environment.</li>
</ul>

<p>A build of site is an iterative process where each iteration involves four steps,</p>

<ul>
  <li>Creating content for the site; in our case in the form of posts.</li>
  <li>Checking if the content and the styling of the site is proper by running the site on a local server. This is called <strong>development version</strong>.</li>
  <li>Once things are in order, committing the incremental creation to a version control system.</li>
  <li>Finally deploying the site on a real server or production server. This means others on the internet can access your website. This is called <strong>production version</strong>.</li>
</ul>

<p>Let us discuss these steps below.</p>

<h3 id="creating-posts">Creating posts</h3>

<p>Go to the <code class="highlighter-rouge">_posts</code> directory and create a post. Jekyll posts support markdown. A valid format for the name of the post is</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Year-Month-Date-name-of-post.md
2020-05-24-how-to-build-jekyll.md
</code></pre></div></div>

<h3 id="serve-the-site-on-a-local-server">Serve the site on a local server</h3>
<p>After creating the content, to check how the site would appear if deployed on production servers, we can serve the site from a local server provided by Jekyll by</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.../root$bundle exec jekyll serve
</code></pre></div></div>

<p>The site can then be accessed at <code class="highlighter-rouge">http:localhost:4000</code>. We can keeping modifying content even when the site is running. This is an <strong>awesome feature</strong> of Jekyll and is called <strong>incremental-build</strong>.</p>

<h3 id="versioning-the-site">Versioning the site</h3>

<p>Once you are satisfied with how the site is deployed, stop the server. Now it is a good idea to version control the site using Git. If not already initialized, initialize the git repository in the directory where the root of the site resides. We have named the root of the directory as <code class="highlighter-rouge">root</code> itself.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;parent-directory-of-site's-root&gt;$git init
</code></pre></div></div>

<h3 id="build-the-site-for-production">Build the site for production</h3>

<p>Now generate the site for production using</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>JEKYLL=bundle exec jekyll build
</code></pre></div></div>

<p>This generates a <code class="highlighter-rouge">sites</code> directory in the <code class="highlighter-rouge">root</code> directory.</p>

<hr />

<h1 id="workflows-for-building-the-site">Workflows for building the site</h1>

<p>There are two workflows for building the site. The first involves simple configuration but many steps during deployment. The second involves lengthy configuration but simple click deployment. Common to both the posts are creating the post and checking the site on local server. What differs is how we version control the site and its source code and how we deploy the production ready site.</p>

<h2 id="simple-workflow">Simple workflow</h2>

<p>Basically in the simple workflow we separate the source code of the site from the site ready for production. To accomplish, we have two gitted repositories; one for the source and the other for the deployment</p>

<h3 id="source-side-git-repository">Source side git repository</h3>

<p>If not already initialized, initialized a git repository in the directory which contains the <code class="highlighter-rouge">root</code> of the site’s source code. Also create a <code class="highlighter-rouge">.gitignore</code> file to exclude the built site at <code class="highlighter-rouge">_site</code> and other cache files of Jekyll as shown below</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;parent-directory-of-site's-root&gt;$git init
</code></pre></div></div>

<p><img src="/assets/images/Jekyll/JekyllBuildWebsite_02.png" alt="simple-workflow" /></p>

<p>Now after an incremental creation of site and cross checking in the local server, when it is time to version control the site, commit to the repository by</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$git commit -m "my nth post"
</code></pre></div></div>

<p>Now build the site using</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$bundle exec jekyll build
</code></pre></div></div>

<p>This will generate a <code class="highlighter-rouge">_site</code> directory which holds the site files. These need to copied with delta copy algorithm to the Server side repository.</p>

<h3 id="server-side-git-repository">Server side git repository</h3>

<p>I want to push my site files to the GitHub using the GitHub’s website hosting service. Basically a repository named <code class="highlighter-rouge">&lt;GitHubusername&gt;.github.io</code> can host your website automatically. This is possible due to the <code class="highlighter-rouge">GitHub pages</code> website hosting <strong>service</strong>. My username on GitHub is baalkikhaal. Once I create a repository named baalkikhaal.github.io in my profile I will clone it on my local computer using</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;server-side-git-repository-parent-directory&gt;$git clone https://github.com/Baalkikhaal/Baalkikhaal.github.io.git
</code></pre></div></div>

<p>This creates a local copy of the server side repository at <code class="highlighter-rouge">...Sites/Baalkikhaal.github.io</code> directory. This directory contains only the site files which are there at production server on GitHub site. Additionally it has git files like <code class="highlighter-rouge">.git</code> directory. In this way I have copy of the server side of the site.</p>

<p>Since I have created an incremental content in the source side repository and built the site also there will be additional files in the source side in comparison to server side as shown below by listing the contents of <code class="highlighter-rouge">.../homepage/root/_site</code> source side directory and <code class="highlighter-rouge">.../Sites/Baalkikhaal.github.io</code> using <code class="highlighter-rouge">ls -al</code> command as shown below.</p>

<p><img src="/assets/images/Jekyll/JekyllBuildWebsite_03.png" alt="files-to-sync" /></p>

<p>All I have to do is transfer my site files here from the source side. For this I will <strong>delta copy</strong> my site files from source side using <code class="highlighter-rouge">rsync</code> command. <code class="highlighter-rouge">rsync</code> uses delta-copy algorithm and preserves the flags of the file like creation date and modification date. In this way, unmodified files in the site will not be recopied thereby avoiding unnecessary overhead during incremental commits</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$rsync -av dir1/ dir2
</code></pre></div></div>

<p>this command copies the contents of <code class="highlighter-rouge">dir1</code> excluding the <code class="highlighter-rouge">dir1</code> perse into the <code class="highlighter-rouge">dir2</code>. This is done below to transfer the contents of <code class="highlighter-rouge">_site</code> from <code class="highlighter-rouge">.../homepage/root/_site/</code> to <code class="highlighter-rouge">.../Sites/Baalkikhaal.github.io/</code>. Specifically the command used is shown below</p>

<p><img src="/assets/images/Jekyll/JekyllBuildWebsite_04.png" alt="files-are-synced" /></p>

<p>Now that the files are added to the server side repository, it is time to commit the files to the git. After doing the commit similar to that done in source side repository. It is time to push the commit to the production server hosted at GitHub using</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$git push origin master
</code></pre></div></div>

<p>The meaning of this command is explained in the <a href="https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control">Git tutorial</a>.</p>

<h2 id="github-pages-workflow">GitHub pages workflow</h2>

<p>Refer <a href="https://pages.github.com/">GitHub pages</a> for setting up this workflow. It involves tedious configuration steps, but once the site is configured, it is simple click to deploy the site for production unlike the <em>Simple Workflow</em>.</p>

<p>In the Simple Workflow, we use Github as a website hosting service only. A website hosting service provides</p>
<ul>
  <li>storage space for our content</li>
  <li>a URL(Universal Resource Locator) for our website, so any one on the internet can access our content. The internals of serving a site like setting up a web server, alloting an IP address for the machine which is running the server, is undertaken by the hosting service reducing the overhead for the client. The job of the client is to only store the html content at the appropriate location on the server machine. This is usually done by an FTP transfer of files as in the case of LAN network which consist of a peripheral node machine that talks to the outside world</li>
  <li>
    <p>web security service. This is one of the most important aspects of internet communication. Disruption to the serving of content is attempted with malicious intent by many elements either human or bots. Disruption can be in the form of</p>
  </li>
  <li>corrupting the content.</li>
  <li>making the content inaccessible to potential users.</li>
  <li>tracking the usage of content violating the privacy of users.</li>
</ul>

<p>It is the duty of the hosting service to secure the content. When we use Jekyll to create our static content, we programmatically create the linked site structure in the form of posts and pages. As Jekyll supports mardown, creating posts in markdown is more easier than writing in raw html by utilizing the markdown’s easily readable markup format. The posts and pages are written in markdown. In addition, the assets of the site like multimedia (images, audio, video files), javascript (for animations and event driven responses) and css (for styling the content) are handled as separate containers are easily linked to sites using Markdown’s hyper reference syntax. Further in combination with Jekyll’s <strong>Liquid template language</strong>,  we can load load dynamic content on your site.. Once we are ready with our content, we need to build the site. This means we turn the crank of Jekyll and it generates inter linked html content ready to be hosted.</p>

<p>In the simple workflow, the step of building content is done offline by the user and once h/she is satisfied with how the content is served by testing on a local server, the built content is pushed onto the machine providing the web hosting service. In general the machine can be provided by any service provider. It is not required that the site built from jekyll needs to served on Github repository. However we choose to serve it on a Github repository as it provides free hosting service. As shown earlier, by pushing the content on the <code class="highlighter-rouge">baalkikhaal.github.io</code> repository, the html is served at <code class="highlighter-rouge">https://baalkikhaal.github.io</code>. In the backend, it is the <code class="highlighter-rouge">Github Pages</code> webhosting service that is responsible for serving the site.</p>

<h3 id="github-pages">Github Pages</h3>
<p>Github Pages is a website hosting service that has two roles</p>

<ul>
  <li>serve the html content hosted on the repository</li>
  <li>build the html content jekyll source</li>
</ul>

<p>The first role is utilized in the Simple Workflow. The second role can be utilized to outsource the job of building the jekyll site to the Github Pages so that there is no need to build the site offline. Further convenience is gained by maintaining a local git of the site repository. After editing the site, a simple push to the origin ensures the changes are live. If the git jargon is confusing, please check out <a href="/2020/05/23/Git-Command-Cheat-Sheet.html">git jargon</a>. This makes the building sites easy and is reflected in the motto of <a href="https://pages.github.com/">Github Pages</a></p>

<blockquote>
  <p>Just edit, push, and your changes are live.</p>
</blockquote>

<hr />



  



  </body>
</html>
